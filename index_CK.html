<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>The Town | The Reckoning of Mammoth Lakes, CA</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
  <link rel="stylesheet" href="css/main.css" type="text/css" media="screen" title="no title" charset="utf-8">
  <script type="text/javascript" src="js/modernizr-2.6.2-respond-1.1.0.min.js" charset="utf-8"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/jquery-1.8.3.min.js"><\/script>')</script>
  <script src="js/mediaelement/mediaelement-and-player.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/jgestures.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/base.js?v=19" type="text/javascript" charset="utf-8"></script>
  <link href='http://fonts.googleapis.com/css?family=Lato:300,400|Oswald:400,300' rel='stylesheet' type='text/css'>
	
  <style type="text/css" media="screen">
	/*** Put styles here for opening slide ***/
	/*THINGS THAT ARE LEFT:
	
	--MORE OR LESS DONE----Get video clips to cue AFTER slide text
	
	--DONE----Add in chapter menu selector
	-Replace menu image with blank box save for title and vertical line - code in the rest of the text?
	-Add links to menu items.
	-Implement SVG version of image.
	
	--Get function 'glowSwipeIcon' to remain off-screen for a few seconds.
	
	--Add in all slides, whether there are effects or not
	
	--Add touchscreen functionality - swipe effects for transitions
	-Add effect for "Main" video pages: Two-finger reverse swipe to clear away "fog" div from the video.
	
	--Adjust mediaelement.js so that when a video is finished, it transitions automatically to the next slide
	
	--Add in final UI 
	
	--Music - add bass string to left hand on intro theme
	
	--Add SoundManager 2 plugin for music tracks. Make sure UI is invisible except for a "sound off" icon
	
	--Clean up CSS for text on all slides (may need final footage before this can be done).
	
	--REDIRECT PAGE FUNCTIONS:
	
	1. Swipe to remove semi-transparent div from slide (Part 2-4 Main).
	
	2. 
	
	--Put media queries for mobile devices - images with boxes drawn on PNG don't scale down to accommodate text
	
	--Figure out why HTML resets when you go back to the beginning from Epilogue
	
	--Record ambient nature sounds over spring break for Epilogue? 

	*/
		
	#container{
		background: #000;
	}
	
	#opening{ 
		color:#fff5cc;
		opacity:0;
	}
	
	#opening-text{
		position:absolute;
		z-index:100;
		width:400px;
		left:45%;
		margin-left:-200px;
		margin-top:10%;
	}

	#opening video{
		position: absolute;
		top: 0;
		z-index: 1;
		border:1px solid white;
	}

	#opening h1{
		font-size: 48px;
		line-height:48px;
		opacity: 0;
		padding: 1% 0 0 0;
		
	}
	#opening h2{
		font:300 1.5em/1.5em Oswald, "Gill Sans", Helvetica, Arial, sans-serif;
		opacity: 0;
		padding: 15px 0 0 0;
	}
	
	#opening h3{
		font:300 1.2em/1.5em Oswald, "Gill Sans", Helvetica, Arial, sans-serif;
		opacity: 0;
		padding: 15px 0;
	}
	
	#opening #play a{
		font:400 1.5em/1.5em Oswald, Arial, Helvetica, sans-serif;
		color: #fff5cc;
		display:block;
		text-align:center;
		padding:40px 0;
	}
	
	#menu{
		position:absolute;
		z-index:200;
		cursor: pointer;
		opacity: 0.3;
		width: 50px;
		height: 50px;
	}
	
	.top{
		position: absolute;
		top: 6%;
		z-index: 190;
		/*background-image: url('icon/mochaGrunge.png');*/
		display: none;
		font-family: Lato;
		font-weight: 300;
		color: #FFF;
		width: 100%;
	}
	
	#opening #description{
		font:normal 1.1em/1.8em Lato, Helvetica, Arial, sans-serif;
		font-weight: 300;
		text-align: justify;
		opacity:0;
	}

  </style>

	<script type="text/javascript" charset="utf-8">
	/*** Put any scripts here for opening slide only ***/
	
	jQuery(document).ready(function($){
		
		/*
		
		h1.longtext is The Town
		h2.longtext is Reckoning of mammoth
		.text is credits
		#description is opening description
		
		*/
		
		$(".longtext, .text").animate({'opacity': '1'}, 4000);
		
		setTimeout(function(){
			$('#description').animate({'opacity':'1'}, 4000);
		}, 1500);
		
					
		//fadeup text
		$(".longtext").animate({'opacity': '1'}, 7000);
			
			
		/* BRING UP CHAPTER MENU */
		
		//var opacity = 0.3, toOpacity = 0.9, duration = 1000;
		
		$('#menu').click(function(){
			
			$('.top').slideToggle(1000);
			
		});
		
		
		//VIDEO
			
		$('video').mediaelementplayer({
         'loop':true,
         'clickToPlayPause':false,
         success:function(player, dom, mediaelement){

           //As background video, make sure it's position absolutely
           mediaelement.container[0].style.position = 'absolute';
           mediaelement.container[0].style.zIndex = '1';

           //background video should autoplay
           player.play();
         }
		 });
	
		//fadeup opening	
		$('#opening').animate({'opacity': '1'}, 1000, function(){glowPlayButton();});
		
		//make play button glow
		function glowPlayButton(){
			$('#play').animate({'opacity':'0.3'}, 1000, function(){
				$('#play').animate({'opacity':'1.0'}, 1000, function(){
					glowPlayButton();
				})
			})
		}			
	});
	
	</script>
</head>
<body>
	<img id="menu" src="icon/button.svg" alt="menu button" class="nav" />
	<img class="top nav" src="icon/MenuRevis.svg" type="image/svg+xml" alt="Rectangle Top" />

  <!-- This is the container, whose contents will be replaced by all of the different sections. -->
  <div id="container">
	
	<div id="opening"> 
		<div id="opening-text">
			<h1 class="longtext"><span>THE TOWN</span></h1>
			<h2 class="longtext"><span>THE RECKONING OF MAMMOTH LAKES, CALIFORNIA</span></h2>
			<h3 class="text"><span>By C.K. Hickey and Matt Sarnecki</span></h3>
			<p id="description">An isolated mountain resort agrees to a development<br> deal that leads to a battle of egos, small town<br> prejudice, lost friendships, and financial disaster.</p>
			<p id="play"><a href="part-one_main.html" class="linkone" data-transition="fadeInOut" data-transitionspeed="4000">PLAY</a></p>
		</div>
		
		<video width="1920" height="1080" controls="false">
			<!-- MP4 Version of the video to play on iOS, Chrome and IE -->
			<source src="videos/Opening_Animation.mp4" />

			<!-- Flash fallback for non-HTML5 browsers without JavaScript, and FireFox -->
			<object width="1920" height="1080" type="application/x-shockwave-flash" data="build/flashmediaelement.swf">
				<param name="movie" value="build/flashmediaelement.swf" />
				<param name="flashvars" value="controls=false&file=videos/intro_animation_placeholder.mp4" />

				<!-- Image as a last resort -->
				<img src="surfacestill.png" width="100%" height="auto" title="No video playback capabilities" />
			</object>
		</video>
		
		<embed height="10" width="10" src="music/theme1two.aif">
	 </div><!-- end #opening -->
  </div><!-- end #container -->
</body>
</html>
